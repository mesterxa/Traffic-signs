<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DriveLearn â€“ Traffic Quiz</title>

<style>
:root {
  --primary:#2563eb;
  --primary-dark:#1e40af;
  --bg-light:#ffffff;
  --bg-dark:#0f172a;
  --card-light:#ffffff;
  --card-dark:#111827;
  --text-dark:#111827;
  --text-light:#e5e7eb;
  --radius:16px;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:"Segoe UI",system-ui,sans-serif;
  background:var(--bg-light);
  color:var(--text-dark);
}
body.dark{background:var(--bg-dark);color:var(--text-light)}
a{text-decoration:none;color:inherit}

/* Navbar */
.navbar{
  height:56px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 18px;
  background:var(--card-light);
  box-shadow:0 4px 12px rgba(0,0,0,.06);
}
body.dark .navbar{background:var(--card-dark)}
.navbar a{color:var(--primary);font-weight:600;margin-left:14px}

/* Hero */
.hero{
  padding:80px 20px;
  text-align:center;
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  color:white;
}

/* Quiz */
.container{
  max-width:600px;
  margin:-60px auto 0;
  padding:0 20px;
}
.card{
  background:var(--card-light);
  padding:30px;
  border-radius:var(--radius);
  box-shadow:0 14px 35px rgba(0,0,0,.12);
  text-align:center;
}
body.dark .card{background:var(--card-dark)}

.sign{font-size:90px;margin-bottom:20px}

.options button{
  width:100%;
  margin:10px 0;
  padding:14px;
  border:none;
  border-radius:12px;
  background:var(--primary);
  color:white;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}
.options button:hover{background:var(--primary-dark)}

.next{
  margin-top:15px;
  padding:12px 30px;
  border-radius:999px;
  background:#16a34a;
  color:white;
  border:none;
  font-weight:700;
  display:none;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="navbar">
  <a href="index.html">Home</a>
  <a href="signs.html">Signs</a>
</div>

<section class="hero">
  <h1>Traffic Quiz</h1>
  <p>Test your knowledge of traffic signs</p>
</section>

<div class="container">
  <div class="card">
    <div class="sign" id="sign"></div>
    <div class="options" id="options"></div>
    <button class="next" id="next">Next</button>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
import { getAuth } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";
import { getFirestore, doc, updateDoc } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey:"AIzaSyAukmQBNFxX_AhpxYOQfDVtGux07OkzN6Q",
  authDomain:"traffic-signs-fc047.firebaseapp.com",
  projectId:"traffic-signs-fc047"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const quiz = [
  {sign:"ðŸ›‘",options:["Stop","No Entry","Parking"],answer:"Stop"},
  {sign:"â›”",options:["Stop","No Entry","Danger"],answer:"No Entry"},
  {sign:"ðŸš¸",options:["Children","Speed","Parking"],answer:"Children"}
];

let i=0,score=0;
const signEl=document.getElementById("sign");
const options=document.getElementById("options");
const next=document.getElementById("next");

function load(){
  signEl.textContent=quiz[i].sign;
  options.innerHTML="";
  next.style.display="none";
  quiz[i].options.forEach(o=>{
    const b=document.createElement("button");
    b.textContent=o;
    b.onclick=()=>check(o);
    options.appendChild(b);
  });
}

function check(ans){
  if(ans===quiz[i].answer) score+=10;
  next.style.display="inline-block";
}

next.onclick=()=>{
  i++;
  if(i<quiz.length) load();
  else finish();
};

function finish(){
  auth.onAuthStateChanged(async user=>{
    if(!user) return location.href="login.html";
    const result=score>=20?"Passed":"Failed";
    await updateDoc(doc(db,"users",user.uid),{score,result});
    location.href="result.html";
  });
}

load();
</script>

</body>
</html>