<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Teacher – Login Attempts</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* نفس تصميم DriveLearn */
:root{
  --primary:#2563eb;
  --bg:#f8fafc;
  --card:#fff;
  --radius:16px;
}
body{
  margin:0;
  font-family:"Segoe UI",system-ui;
  background:var(--bg);
}
.navbar{
  background:#fff;
  padding:14px 20px;
  display:flex;
  justify-content:space-between;
  box-shadow:0 4px 12px rgba(0,0,0,.06);
}
.navbar a{color:var(--primary);font-weight:600;text-decoration:none}

.container{
  max-width:1100px;
  margin:30px auto;
  padding:0 20px;
}

.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:20px;
}

.card{
  background:var(--card);
  padding:20px;
  border-radius:var(--radius);
  box-shadow:0 10px 25px rgba(0,0,0,.1);
}

.success{color:green;font-weight:700}
.failed{color:red;font-weight:700}
.blocked{color:#dc2626;font-weight:700}
</style>
</head>

<body>

<div class="navbar">
  <strong>Teacher Panel</strong>
  <a href="index.html">Home</a>
</div>

<div class="container">
  <h2>Login Attempts</h2>
  <div class="cards" id="cards">Loading...</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
import { getFirestore, collection, getDocs, query, orderBy } 
from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";

const firebaseConfig={
  apiKey:"AIzaSyAukmQBNFxX_AhpxYOQfDVtGux07OkzN6Q",
  authDomain:"traffic-signs-fc047.firebaseapp.com",
  projectId:"traffic-signs-fc047"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

const q=query(collection(db,"loginAttempts"),orderBy("time","desc"));
const snap=await getDocs(q);

let html="";
snap.forEach(d=>{
  const a=d.data();
  html+=`
    <div class="card">
      <p><strong>Email:</strong> ${a.email}</p>
      <p><strong>Role:</strong> ${a.role}</p>
      <p class="${a.status}">
        ${a.status.toUpperCase()}
      </p>
    </div>
  `;
});

cards.innerHTML=html || "No attempts yet";
</script>

</body>
</html>